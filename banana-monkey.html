<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Banana Monkey</title>

    <script src="https://d309knd7es5f10.cloudfront.net/createjs_1.1_min.js"></script>
    <script src="https://d309knd7es5f10.cloudfront.net/zim_10.js"></script>
    <script src="https://d309knd7es5f10.cloudfront.net/Box2dWeb-2.1.a.3.min.js"></script>
    <script src="https://d309knd7es5f10.cloudfront.net/physics_2.0.js"></script>

    <script>

        var scaling = "fit";
        var width = 1280;
        var height = 720;
        var color = light;
        var outerColor = dark;
        var assets = ["banana.png", "brick.png", "trees.png", "monkey.png", "basket.png", "grass.png", "background.jpg"];
        var path = "images/";

        var frame = new Frame(scaling, width, height, color, outerColor, assets, path);
        frame.on("ready", function () {
            zog("Ready from ZIM Frame");

            var stage = frame.stage;
            var stageW = frame.width;
            var stageH = frame.height;

            // put your code here:

            var bg = frame.asset("background.jpg").center();


            var physics = new Physics(10, new Boundary(bg.x, bg.y, bg.width, bg.height), true);
            physics.debug();

            var monkey1 = frame.asset("monkey.png")
                .sca(.5)
                .centerReg()
                .loc(-38, 1225)
                .addPhysics(false); // will stay in its location
            var monkey2 = monkey1.clone().addTo().loc(413, 1381).addPhysics(false);
            var monkey3 = monkey2.clone().addTo().loc(1200, 959).addPhysics(false);
            var obstacle = frame.asset("brick.png").centerReg().loc(712, 435).addPhysics(false);

            makeBanana();
            var banana;
            function makeBanana() {
                banana = frame.asset("banana.png")
                    .sca(.2)
                    .centerReg()
                    .loc(-400, stageH*2)
                    .addPhysics({ restitution: 0.5, contract: 10, shape: "circle" })
                    .control()
                    .follow()
                    .reg(315, 343)
                    physics.drag();
                }

                banana.contact(function (obj, body) {
                    if (obj == monkey1) {
                        banana.removePhysics();
                        banana.removeFrom();
                        monkey1.removePhysics();
                        monkey1.removeFrom();
                        makeBanana();
                    }
                    if (obj == monkey2) {
                        banana.removePhysics();
                        banana.removeFrom();
                        monkey2.removePhysics();
                        monkey2.removeFrom();
                        makeBanana();
                    }
                    if (obj == monkey3) {
                        banana.removePhysics();
                        banana.removeFrom();
                        monkey3.removePhysics();
                        monkey3.removeFrom();
                        makeBanana();
                    }
                });

            stage.update();

        });

    </script>

    <meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body>
    <!-- Canvas with id="myCanvas" is made by ZIM Frame -->
</body>

</html>
