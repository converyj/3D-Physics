<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Banana Monkey</title>

<script src="https://d309knd7es5f10.cloudfront.net/createjs_1.1_min.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/zim_10.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/Box2dWeb-2.1.a.3.min.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/physics_2.0.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/pizzazz_03.js"></script>

<script>

var scaling = "fit";
var width = 1024;
var height = 768;
var color = light;
var outerColor = dark;
var assets = "banana.png";
var path = "images/"; 

var frame = new Frame(scaling, width, height, color, outerColor, assets, path);
frame.on("ready", function() {
    zog("Ready from ZIM Frame");

    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;

    // see https://zimjs.com/learn.html for video and code tutorials
    // see https://zimjs.com/docs.html for documentation
    // see https://zimjs.com/bits.html for 64 Interactive Media techniques

    // put your code here:

var backing = pizzazz.makePattern({
        type:"digital",
        backgroundColor:green,
        colors:black,
        size:100,
        rows:100,
        cols:200
    }).alp(1).reg(0,0).center();

    var physics = new Physics({gravity:10, scroll:true});

    var banana = frame.asset("banana.png").sca(.2)
        .centerReg()
        .pos(0, null, false, true)
        .addPhysics({restitution:0.5, contract:2})
         .control()
        .follow();

        physics.drag();
// physics.scroll(); 
         // banana.follow(); 

    var monkey = new Circle(50, brown)
        .center()
        .pos(700, 200)
        .addPhysics(false);

    // physics.drag();

    // banana.on("mousedown", function (e) {
    //     zog("mousedown");
    //     // banana.addPhysics({restitution:0.5});
    //     // physics.drag();
    // })

var rect = {x:backing.x, y:backing.y, width:backing.width, height:backing.height};
    // physics.borders();
    
    physics.remove(physics.borderTop);
    physics.remove(physics.borderRight);




    physics.debug();




    var tree = new Rectangle(100, 600, green)
        .centerReg()
        .pos(null, null, true, true)
        .addPhysics(false); // will stay in its position but banana will bounce off it

    // banana.contact(function (obj, body) {
    //     if (obj == tree) {
    //         obj.color = blue;
    //     }
    //     if (obj == monkey) {
    //         zog("hit monkey");
    //         banana.removePhysics();
    //         // banana.removeFrom(); 
    //         stage.update();
    //     }
    // });

    stage.update();

});

</script>

<meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body>
<!-- Canvas with id="myCanvas" is made by ZIM Frame -->
</body>
</html>
